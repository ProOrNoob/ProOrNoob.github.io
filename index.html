<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bhaddekaratta â€” PÄli / English / Tiáº¿ng Viá»‡t (Grid view) â€” Modified</title>
  <style>
    :root{--bg:#f5f7fb;--card:#ffffff;--muted:#64748b;--accent:#2563eb}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:#0f172a;margin:0;padding:0;height:100vh;overflow:hidden}

    /* container: default fixed max-width, but can toggle to full-width */
    .page{min-height:100vh;display:flex;flex-direction:column}
    header{position:sticky;top:0;z-index:1100;background:linear-gradient(180deg, rgba(245,247,251,0.95), rgba(245,247,251,0.7));backdrop-filter:blur(4px);border-bottom:1px solid rgba(0,0,0,0.04)}
    .wrap{max-width:980px;margin:0 auto;width:100%;transition:max-width .2s ease,padding .2s ease;padding:20px}
    .wrap.full{max-width:none;padding:12px 28px}

    .header-inner{display:flex;align-items:center;gap:12px;padding:10px 0}
    .title-area{display:flex;align-items:center;gap:12px}
    .back-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:8px;border:1px solid #e6eef8;background:var(--card);cursor:pointer;text-decoration:none;color:inherit;font-weight:600}
    h1{font-size:18px;margin:0;line-height:1}

    .controls{margin-left:auto;display:flex;gap:12px;align-items:center}
    .control-group{display:flex;gap:8px;align-items:center;padding:6px;border-radius:10px;background:transparent}
    .color-controls .chip{padding:6px 8px;font-size:13px}
    .toggle-controls .chip{padding:6px 10px}
    .action-controls{display:flex;gap:8px}
    .back-btn{padding:8px 12px}
    .control-group.color-controls{position:relative}
    .dropdown-panel{position:absolute;right:0;top:calc(100% + 8px);background:var(--card);border:1px solid rgba(0,0,0,0.06);padding:10px;border-radius:8px;box-shadow:0 8px 24px rgba(2,6,23,0.06);display:none;z-index:1200}
    .dropdown-panel.open{display:block}
    .dropdown-panel .chip{display:flex;align-items:center;margin-bottom:6px}    

    .chips{display:flex;gap:8px}
    label.chip{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;background:var(--card);border-radius:10px;border:1px solid #e6eef8}
    input[type=checkbox]{width:18px;height:18px}
    button.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;background:var(--card);border-radius:10px;border:1px solid #e6eef8;cursor:pointer}

    main{flex:1;display:flex}
    .content{flex:1}

    .card{background:var(--card);border-radius:12px;padding:14px;border:1px solid #e6edf7;margin:0 auto 18px;position:relative;width:100%}
    .grid{display:grid;grid-template-columns:1fr;gap:10px}
    /* default: 3 columns per row (Pali / Eng / Vie) */
    .row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;align-items:start;padding:12px;border-radius:8px}
    .row:nth-child(odd){background:rgba(37,99,235,0.03)}
    .col{min-height:1px;padding:8px;border-radius:6px}

    .pali{font-family:'Noto Serif',serif;font-size:15px;line-height:1.6}
    .eng{font-family:Georgia,serif;font-size:14px;line-height:1.6}
    .vie{font-family:system-ui;font-size:14px;line-height:1.6}
    .head{font-weight:600;color:var(--muted);font-size:13px;margin-bottom:6px}

    /* hidden states (we'll still keep elements but hide them) */
    .hide-eng .col.eng{display:none}
    .hide-vie .col.vie{display:none}

    /* layout modes */
    .stack .row{grid-template-columns:1fr}

    /* scroll-to-top button positioned near scrollbar (mid-right) */
    .btn-scroll-top{position:absolute;right:8px;top:50%;bottom:auto;transform:translateY(-50%);display:none;align-items:center;justify-content:center;width:40px;height:40px;border-radius:999px;background:var(--card);box-shadow:0 6px 18px rgba(2,6,23,0.08);border:1px solid rgba(0,0,0,0.06);cursor:pointer}
    .btn-scroll-top.visible{display:flex}

    .site-footer{position:fixed;bottom:0;left:0;width:100%;background:var(--bg);}
    .footer{padding:12px 0;color:var(--muted);font-size:13px;border-top:1px solid rgba(0,0,0,0.04);text-align:center}

    /* responsive */
    @media (max-width:820px){
      .wrap{padding:12px}
      .row{grid-template-columns:1fr}
      .head{display:block}
      .btn-scroll-top{right:10px;top:auto;bottom:10px;transform:none}
    }

    .small{font-size:13px;color:var(--muted);margin-top:10px}
    .footer{padding:12px 0;color:var(--muted);font-size:13px;border-top:1px solid rgba(0,0,0,0.04);text-align:center}
  </style>
</head>
<body>
  <div class="page">
    <header>
      <div class="wrap" id="wrapHeader">
        <div class="header-inner">
          <div class="title-area">
            <a href="../index.html" class="back-btn" id="backBtn">â† Danh má»¥c</a>
            <div>
              <h1>Bhaddekaratta</h1>
            </div>
          </div>

          <div class="controls" role="toolbar" aria-label="Controls">
            <div class="control-group color-controls" aria-label="Color settings">
              <div class="dropdown">
                <button id="colorToggle" class="btn" aria-haspopup="true" aria-expanded="false" title="TÃ¹y chá»‰nh mÃ u">ğŸ¨ MÃ u</button>
                <div id="colorPanel" class="dropdown-panel" role="menu" aria-hidden="true">
                  <label class="chip"><input id="engBg" type="color" title="Background English"/> MÃ u ná»n English</label>
                  <label class="chip"><input id="engColor" type="color" title="Text English"/> MÃ u chá»¯ English</label>
                  <label class="chip"><input id="vieBg" type="color" title="Background Vietnamese"/> MÃ u ná»n Tiáº¿ng Viá»‡t</label>
                  <label class="chip"><input id="vieColor" type="color" title="Text Vietnamese"/> MÃ u chá»¯ Tiáº¿ng Viá»‡t</label>
                  <div style="height:8px"></div>
                  <button id="resetColor" class="btn">Reset mÃ u</button>
                </div>
              </div>
            </div>

            <div class="control-group toggle-controls" aria-label="Toggle languages">
              <label class="chip"><input id="chkEng" type="checkbox" checked/> English</label>
              <label class="chip"><input id="chkVie" type="checkbox" checked/> Tiáº¿ng Viá»‡t</label>
            </div>

            <div class="control-group action-controls" aria-label="Actions">
              <button id="btnLayout" class="btn" title="Chuyá»ƒn layout">ğŸ”³ Chia / Xáº¿p</button>
              <button id="btnFull" class="btn" title="ToÃ n mÃ n">â¤¢ ToÃ n mÃ n</button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="content">
        <div class="wrap" id="wrapContent">
          <div class="card" id="card">
            <div class="grid" id="grid">

              <!-- Row 1 -->
              <div class="row" data-idx="1">
                <div class="col pali" data-lang="pali"><div class="head">PÄli</div><div class="pali">Evaá¹ me sutaá¹: Ekaá¹ samayaá¹ bhagavÄ sÄvatthiyaá¹ vihÄrati jetavane anÄthapiá¹‡á¸ikassa ÄrÄme.</div></div>
                <div class="col eng" data-lang="eng"><div class="head">English</div><div class="eng">Thus have I heard: At one time the Blessed One was dwelling at SÄvatthÄ«, in Jeta's Grove, AnÄthapiá¹‡á¸ika's Park.</div></div>
                <div class="col vie" data-lang="vie"><div class="head">Tiáº¿ng Viá»‡t</div><div class="vie">Nghe nhÆ° váº§y: CÃ³ má»™t thá»i, Tháº¿ TÃ´n trÃº táº¡i XÃ¡-vá»‡, trong rá»«ng Ká»³-Ä‘Ã , táº¡i khu vÆ°á»n cá»§a AnÄthapiá¹‡á¸ika.</div></div>
              </div>

              <!-- Row 2 -->
              <div class="row" data-idx="2">
                <div class="col pali" data-lang="pali"><div class="pali">Tatra kho bhagavÄ bhikkhÅ« Ämantesi: â€œBhikkhavoâ€ti. â€œBhaddanteâ€ti te bhikkhÅ« bhagavato paccassosuá¹.</div></div>
                <div class="col eng" data-lang="eng"><div class="eng">There the Blessed One addressed the bhikkhus: "Bhikkhus!" "Venerable sir," the bhikkhus replied to the Blessed One.</div></div>
                <div class="col vie" data-lang="vie"><div class="vie">á» Ä‘Ã³ Tháº¿ TÃ´n nÃ³i vá»›i cÃ¡c tá»³-kheo: â€œNÃ y cÃ¡c tá»³-kheo.â€ â€œBáº¡ch trÆ°á»Ÿng lÃ£o,â€ cÃ¡c tá»³-kheo tráº£ lá»i Äá»©c Pháº­t.</div></div>
              </div>

              <!-- Row 3 -->
              <div class="row" data-idx="3">
                <div class="col pali" data-lang="pali"><div class="pali">AtÄ«taá¹ nÄnvÄgameyya, nappaá¹­ikaá¹…khe anÄgataá¹; yadatÄ«taá¹ pahÄ«naá¹ taá¹, appattaÃ±ca anÄgataá¹.</div></div>
                <div class="col eng" data-lang="eng"><div class="eng">Let the past not be clung to; the future not expected; whatever is past has been left behind, and the future is not yet come.</div></div>
                <div class="col vie" data-lang="vie"><div class="vie">Äá»«ng bÃ¡m vÃ­u vÃ o quÃ¡ khá»©, Ä‘á»«ng mong chá» tÆ°Æ¡ng lai; Ä‘iá»u Ä‘Ã£ qua Ä‘Ã£ bá», Ä‘iá»u tÆ°Æ¡ng lai chÆ°a Ä‘áº¿n.</div></div>
              </div>

              <!-- Row 4 -->
              <div class="row" data-idx="4">
                <div class="col pali" data-lang="pali"><div class="pali">Idamavoca bhagavÄ. AttamanÄ te bhikkhÅ« bhagavato bhÄsitaá¹ abhinandunti. Bhaddekarattasuttaá¹ niá¹­á¹­hitaá¹.</div></div>
                <div class="col eng" data-lang="eng"><div class="eng">Thus the Blessed One spoke. The bhikkhus were glad and praised what had been said by the Blessed One. The Bhaddekaratta Sutta is concluded.</div></div>
                <div class="col vie" data-lang="vie"><div class="vie">Äá»©c Pháº­t thuyáº¿t xong. CÃ¡c tá»³-kheo hoan há»· vÃ  tÃ¡n thÃ¡n lá»i Pháº­t dáº¡y. Kinh Bhaddekaratta káº¿t thÃºc.</div></div>
              </div>

            </div>

            

            
            Gá»£i Ã½: báº¥m "Chia / Xáº¿p" Ä‘á»ƒ chuyá»ƒn giá»¯a cháº¿ Ä‘á»™ 3 cá»™t vÃ  xáº¿p chá»“ng. Khi báº¡n áº©n 1 cá»™t, layout tá»± chuyá»ƒn sang 2 cá»™t; áº©n 2 cá»™t sáº½ lÃ m 1 cá»™t full-width. NÃºt "ToÃ n mÃ n" chuyá»ƒn container giá»¯a cháº¿ Ä‘á»™ fixed-width vÃ  full-width. PhÃ­m táº¯t: 2 (toggle English), 3 (toggle Viá»‡t), L (layout), F (fullscreen container).</div>
          </div>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="wrap">
        <div class="footer">Â© 2025 Bhaddekaratta â€” All rights reserved.</div>
      </div>
    </footer>

    

    <footer>
      <div class="wrap">
        <div class="footer" aria-hidden="false">Â© 2025 Bhaddekaratta â€” All rights reserved.</div>
      </div>
    </footer>
  </div>

  <script>
    (function(){
      const wrap = document.getElementById('wrapContent');
      const wrapHeader = document.getElementById('wrapHeader');
      const grid = document.getElementById('grid');
      const card = document.getElementById('card');
      const chkEng = document.getElementById('chkEng');
      const chkVie = document.getElementById('chkVie');
      const btnLayout = document.getElementById('btnLayout');
      const btnFull = document.getElementById('btnFull');
      // helper: update each .row grid-template-columns based on visible columns
      function adjustRowColumns(){
        const rows = grid.querySelectorAll('.row');
        rows.forEach(row=>{
          if(card.classList.contains('stack')){
            row.style.gridTemplateColumns = '1fr';
            return;
          }
          // count visible column elements inside the row
          const cols = Array.from(row.querySelectorAll('.col'));
          const visibleCols = cols.filter(col => {
            if(col.classList.contains('eng') && !chkEng.checked) return false;
            if(col.classList.contains('vie') && !chkVie.checked) return false;
            return true;
          });
          const n = Math.max(1, visibleCols.length);
          row.style.gridTemplateColumns = `repeat(${n}, 1fr)`;
        });
      }

      function updateVisibility(){
        grid.classList.toggle('hide-eng', !chkEng.checked);
        grid.classList.toggle('hide-vie', !chkVie.checked);
        adjustRowColumns();
        updateCardHeight();
      }

      function toggleLayout(){
        card.classList.toggle('stack');
        const isStack = card.classList.contains('stack');
        btnLayout.textContent = isStack ? 'â¬› Xáº¿p chá»“ng' : 'ğŸ”³ Chia / Xáº¿p';
        adjustRowColumns();
        updateCardHeight();
      }

      function toggleFull(){
        wrap.classList.toggle('full');
        const isFull = wrap.classList.contains('full');
        btnFull.textContent = isFull ? 'â¤¡ Thu nhá»' : 'â¤¢ ToÃ n mÃ n';
        // also ensure header wrap matches
        wrapHeader.classList.toggle('full', isFull);
      }

      // Keep header visible & make .card scrollable if content taller than viewport
      function updateCardHeight(){
        const headerHeight = document.querySelector('header').offsetHeight || 0;
        const footerEl = document.querySelector('.site-footer');
        const footerHeight = footerEl ? footerEl.offsetHeight : 0;
        // leave some padding (24px)
        const max = window.innerHeight - headerHeight - footerHeight - 40;
        card.style.maxHeight = max + 'px';
        card.style.overflow = 'auto';
      }
      // (scroll-to-top removed) });

      chkEng.addEventListener('change', updateVisibility);
      chkVie.addEventListener('change', updateVisibility);
      btnLayout.addEventListener('click', toggleLayout);
      btnFull.addEventListener('click', toggleFull);

      window.addEventListener('keydown', (e)=>{
        if(document.activeElement && (document.activeElement.tagName==='INPUT' || document.activeElement.tagName==='TEXTAREA')) return;
        if(e.key === '2'){ chkEng.checked = !chkEng.checked; updateVisibility(); }
        if(e.key === '3'){ chkVie.checked = !chkVie.checked; updateVisibility(); }
        if(e.key === 'l' || e.key === 'L'){ toggleLayout(); }
        if(e.key === 'f' || e.key === 'F'){ toggleFull(); }
        if(e.key === '0'){ chkEng.checked=true; chkVie.checked=true; updateVisibility(); card.classList.remove('stack'); btnLayout.textContent='ğŸ”³ Chia / Xáº¿p'; wrap.classList.remove('full'); btnFull.textContent='â¤¢ ToÃ n mÃ n'; wrapHeader.classList.remove('full'); }
      });

      // color handlers
      const engCols = document.querySelectorAll('.col.eng');
      const vieCols = document.querySelectorAll('.col.vie');
      const engBgInput = document.getElementById('engBg');
      const engColorInput = document.getElementById('engColor');
      const vieBgInput = document.getElementById('vieBg');
      const vieColorInput = document.getElementById('vieColor');

      // load saved colors from localStorage
      const saved = JSON.parse(localStorage.getItem('bh_colors') || '{}');
      if(saved.engBg) engBgInput.value = saved.engBg;
      if(saved.engColor) engColorInput.value = saved.engColor;
      if(saved.vieBg) vieBgInput.value = saved.vieBg;
      if(saved.vieColor) vieColorInput.value = saved.vieColor;

      function applySaved(){
        if(engBgInput.value) engCols.forEach(c=> c.style.background=engBgInput.value);
        if(engColorInput.value) engCols.forEach(c=> c.style.color=engColorInput.value);
        if(vieBgInput.value) vieCols.forEach(c=> c.style.background=vieBgInput.value);
        if(vieColorInput.value) vieCols.forEach(c=> c.style.color=vieColorInput.value);
      }
      applySaved();

      function saveColors(){
        const obj = {engBg: engBgInput.value || '', engColor: engColorInput.value || '', vieBg: vieBgInput.value || '', vieColor: vieColorInput.value || ''};
        localStorage.setItem('bh_colors', JSON.stringify(obj));
      }

      engBgInput.addEventListener('input', e=> { engCols.forEach(c=> c.style.background=e.target.value); saveColors(); });
      engColorInput.addEventListener('input', e=> { engCols.forEach(c=> c.style.color=e.target.value); saveColors(); });
      vieBgInput.addEventListener('input', e=> { vieCols.forEach(c=> c.style.background=e.target.value); saveColors(); });
      vieColorInput.addEventListener('input', e=> { vieCols.forEach(c=> c.style.color=e.target.value); saveColors(); });

      document.getElementById('resetColor').addEventListener('click', ()=>{
        [...engCols,...vieCols].forEach(c=>{c.style.background='';c.style.color='';});
        engBgInput.value=''; engColorInput.value=''; vieBgInput.value=''; vieColorInput.value='';
        localStorage.removeItem('bh_colors');
      });

      // dropdown behaviour for color panel
      const colorToggle = document.getElementById('colorToggle');
      const colorPanel = document.getElementById('colorPanel');
      colorToggle.addEventListener('click', (ev)=>{ ev.stopPropagation(); const open = colorPanel.classList.toggle('open'); colorToggle.setAttribute('aria-expanded', open); colorPanel.setAttribute('aria-hidden', !open); });
      // close when clicking outside
      document.addEventListener('click', ()=>{ colorPanel.classList.remove('open'); colorToggle.setAttribute('aria-expanded', false); colorPanel.setAttribute('aria-hidden', true); });
      colorPanel.addEventListener('click', e=> e.stopPropagation());

      // initial
      updateVisibility();
      updateCardHeight();
      // also adjust on window resize
      window.addEventListener('resize', ()=>{ adjustRowColumns(); updateCardHeight(); });
    })();
  </script>
</body>
</html>
