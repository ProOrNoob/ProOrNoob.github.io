<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nikāya Archive — Index</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --bg:#f5f7fb;
      --card:#ffffff;
      --muted:#64748b;
      --accent:#2563eb;
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      padding:0;
      font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;
      background:var(--bg);
      color:#0f172a;
      overflow:hidden; /* kiểu “app”, không scrollbar ngoài */
    }

    .page-wrapper{
      height:100%;
      display:flex;
      flex-direction:column;
    }

    header{
      flex:0 0 auto;
      background:linear-gradient(180deg, rgba(245,247,251,0.95), rgba(245,247,251,0.85));
      border-bottom:1px solid rgba(15,23,42,0.06);
    }

    header h1{
      text-transform:uppercase;
      letter-spacing:.03em;
      color:var(--accent);
      margin:0;
    }

    .main-container{
      flex:1 1 auto;
      padding:0.5rem 0;
      overflow:hidden;
    }

    footer{
      flex:0 0 auto;
      border-top:1px solid rgba(15,23,42,0.06);
      background:var(--bg);
      font-size:13px;
      color:var(--muted);
    }

    .main-container > .container{
      height:100%;
      padding-left:0.25rem;
      padding-right:0.25rem;
    }
    .main-container .row{
      height:100%;
      overflow:hidden;
      --bs-gutter-x:0.5rem;
    }

    .sidebar-wrapper{
      height:100%;
      transition:width .18s ease-out;
    }

    /* SIDEBAR */
    .sidebar{
      height:100%;
      max-height:100%;
      border-right:1px solid #e5e7eb;
      background:var(--card);
      padding:0.5rem 0.75rem;
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      font-size:13px;
      border-radius:12px;
    }
    .sidebar-section{margin-bottom:0.5rem;}

    .sidebar-toggle{
      width:100%;
      border:none;
      background:transparent;
      padding:4px 6px;
      text-align:left;
      font-weight:600;
      font-size:13px;
      color:#1e293b;
      display:flex;
      align-items:center;
      justify-content:space-between;
      cursor:pointer;
      border-radius:6px;
    }
    .sidebar-toggle:hover{background:rgba(37,99,235,0.06);}
    .sidebar-toggle .chevron{font-size:11px;opacity:0.7;}

    .sidebar-list{margin-top:2px;padding-left:4px;}
    .sidebar-list.collapsed{display:none;}

    .sutta-link{
      display:block;
      padding:3px 6px;
      border-radius:6px;
      text-decoration:none;
      color:#475569;
      font-size:13px;
      white-space:normal;
      word-break:break-word;
      line-height:1.4;
      transition:background-color .15s ease,color .15s ease;
    }
    .sutta-link:hover{
      background:rgba(37,99,235,0.08);
      color:#1d4ed8;
    }
    .sutta-link.active{
      background:var(--accent);
      color:#ffffff;
    }

    /* CONTENT + iframe */
    .content-wrapper{
      height:100%;
      display:flex;
      flex-direction:column;
      padding-left:0.25rem;
      min-width:0;
      /* bỏ max-width để không bị hẹp hơn header */
      max-width:none;
      margin:0;
    }
    #sutraFrame{
      flex:1 1 auto;
      width:100%;
      height:100%;
      border-radius:12px;
      border:1px solid #e5e7eb;
      background:var(--card);
      display:block;
    }

    /* Nút header */
    .btn-header{
      min-width:96px;
      height:36px;
      padding:0 .75rem;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:14px;
      border-radius:10px; /* bớt bo cong cho đồng bộ card */
      white-space:nowrap;
      background:#f8fafc;
      border:1px solid #e2e8f0;
      color:#475569;
    }
    .btn-header:hover{
      background:#e9eef5;
      border-color:#cbd5e1;
      color:#334155;
    }

    /* Nút Index hơi “thuộc về sidebar” */
    #btnSidebarToggle{
      background:#e5e9f2;
      border-color:#d1d5db;
      font-weight:500;
    }
    #btnSidebarToggle:hover{
      background:#dbe3f0;
    }

    .btn-lang{
      min-width:52px;
      padding:0 .5rem;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }

    /* Nhóm control bên phải */
    .top-controls{
      display:flex;
      align-items:center;
      gap:6px;
      padding:3px 6px;
      border-radius:999px;
      background:#f8fafc;
      border:1px solid #e2e8f0;
      flex-wrap:wrap;          /* cho phép xuống hàng khi hẹp */
      justify-content:flex-end;
    }

    /* HELP overlay */
    .overlay{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,0.45);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:2000;
    }
    .overlay.show{display:flex;}
    .dialog{
      background:var(--card);
      border-radius:12px;
      padding:16px 20px;
      max-width:640px;
      width:90%;
      box-shadow:0 18px 45px rgba(15,23,42,0.35);
    }
    .dialog-close{
      border:none;
      background:transparent;
      font-size:20px;
      line-height:1;
      cursor:pointer;
      color:#64748b;
      padding-left:8px;
    }
    .dialog-close:hover{color:#0f172a;}

    /* Overlay cho mobile sidebar */
    .mobile-mask{
      display:none;
    }

    /* MOBILE: sidebar thành drawer trượt */
    @media (max-width:768px){
      .content-wrapper{
        padding-left:0;
        max-width:none;
      }

      .sidebar-wrapper{
        position:fixed;
        top:56px;        /* gần bằng chiều cao header */
        bottom:0;
        left:0;
        width:80%;
        max-width:320px;
        z-index:1200;
        transform:translateX(-100%);
        transition:transform .2s ease-out;
      }

      body.mobile-sidebar-open .sidebar-wrapper{
        transform:translateX(0);
      }

      .mobile-mask{
        position:fixed;
        inset:0;
        background:rgba(15,23,42,0.45);
        z-index:1100;
      }
      body.mobile-sidebar-open .mobile-mask{
        display:block;
      }

      /* Top controls gọn lại */
      .btn-header{
        min-width:auto;
        padding:0 8px;
        font-size:13px;
        height:34px;
      }
      .top-controls{
        border-radius:14px;
        padding:3px 4px;
        gap:4px;
      }
    }
  </style>
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JYT2R1TWMR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-JYT2R1TWMR');
</script>

<body>
  <div class="page-wrapper">

    <!-- HEADER -->
    <header class="py-2">
      <div class="container d-flex align-items-center justify-content-between gap-2">
        <div class="d-flex align-items-center gap-2">
          <button class="btn btn-outline-secondary btn-sm btn-header" type="button" id="btnSidebarToggle">
            <span class="me-1">☰</span>
            <span data-text-vi="Mục lục" data-text-en="Index">Mục lục</span>
          </button>
          <h1 class="h5 mb-0">NIKĀYA</h1>
        </div>

        <!-- Nhóm control bên phải -->
        <div class="top-controls">
          <button class="btn btn-outline-secondary btn-sm btn-header" type="button" id="btnPrev">
            <span>⟨</span>
            <span class="ms-1" data-text-vi="Kinh trước" data-text-en="Previous">Kinh trước</span>
          </button>
          <button class="btn btn-outline-secondary btn-sm btn-header" type="button" id="btnNext">
            <span data-text-vi="Kinh sau" data-text-en="Next">Kinh sau</span>
            <span class="ms-1">⟩</span>
          </button>
          <button class="btn btn-outline-secondary btn-sm btn-header" type="button" id="btnHelp">
            <span data-text-vi="Hướng dẫn" data-text-en="Help">Hướng dẫn</span>
          </button>

          <!-- Nút ngôn ngữ -->
          <button class="btn btn-outline-secondary btn-sm btn-header btn-lang"
                  type="button"
                  id="btnLangVi"
                  title="Tiếng Việt">
            VN
          </button>

          <button class="btn btn-outline-secondary btn-sm btn-header btn-lang"
                  type="button"
                  id="btnLangEn"
                  title="English">
            EN
          </button>
        </div>
      </div>
    </header>

    <!-- MAIN -->
    <main class="main-container">
      <div class="container h-100">
        <div class="row h-100">
          <!-- SIDEBAR -->
          <div class="col-12 col-md-4 col-lg-3 sidebar-wrapper" id="sidebarWrapper">
            <aside class="sidebar" id="sidebar">
              <!-- Dīgha Nikāya -->
              <div class="sidebar-section">
                <button class="sidebar-toggle" type="button" data-target="listDN">
                  <span data-text-vi="Trường Bộ Kinh (Dīgha)" data-text-en="Dīgha Nikāya (Long Discourses)">
                    Trường Bộ Kinh (Dīgha)
                  </span>
                  <span class="chevron">▸</span>
                </button>
                <div id="listDN" class="sidebar-list collapsed">
                  <a href="dn01.html"
                     class="sutta-link"
                     data-title-pali="DN 1 – Brahmajāla Sutta"
                     data-title-vi="DN 1 – Brahmajāla Sutta — Kinh Phạm Võng">
                    DN 1 – Brahmajāla Sutta — Kinh Phạm Võng
                  </a>
                  <a href="dn02.html"
                     class="sutta-link"
                     data-title-pali="DN 2 – Sāmaññaphala Sutta"
                     data-title-vi="DN 2 – Sāmaññaphala Sutta — Kinh Quả Báu Sa-môn Hạnh">
                    DN 2 – Sāmaññaphala Sutta — Kinh Quả Báu Sa-môn Hạnh
                  </a>
                </div>
              </div>

              <!-- Majjhima Nikāya -->
              <div class="sidebar-section">
                <button class="sidebar-toggle" type="button" data-target="listMN">
                  <span data-text-vi="Trung Bộ Kinh (Majjhima)" data-text-en="Majjhima Nikāya (Middle-Length)">
                    Trung Bộ Kinh (Majjhima)
                  </span>
                  <span class="chevron">▾</span>
                </button>
                <div id="listMN" class="sidebar-list">
                  <a href="mn001.html"
                     class="sutta-link"
                     data-title-pali="MN 1 – Mūlapariyāya Sutta"
                     data-title-vi="MN 1 – Mūlapariyāya Sutta — Kinh Căn Bản Pháp Môn">
                    MN 1 – Mūlapariyāya Sutta — Kinh Căn Bản Pháp Môn
                  </a>
                  <a href="mn131-bhaddekaratta.html"
                     class="sutta-link"
                     data-title-pali="MN 131 – Bhaddekaratta Sutta"
                     data-title-vi="MN 131 – Bhaddekaratta Sutta — Kinh Nhất Dạ Hiền Giả">
                    MN 131 – Bhaddekaratta Sutta — Kinh Nhất Dạ Hiền Giả
                  </a>
                  <a href="mn132.html"
                     class="sutta-link"
                     data-title-pali="MN 132 – Ānandabhaddekaratta Sutta"
                     data-title-vi="MN 132 – Ānandabhaddekaratta Sutta — Kinh Nhất Dạ Hiền Giả do Tôn giả A Nan Thuyết">
                    MN 132 – Ānandabhaddekaratta Sutta — Kinh Nhất Dạ Hiền Giả do Tôn giả A Nan Thuyết
                  </a>
                </div>
              </div>

              <!-- thêm các bộ khác nếu cần -->
            </aside>
          </div>

          <!-- CONTENT (IFRAME) -->
          <div class="col-12 col-md-8 col-lg-9 content-wrapper" id="contentWrapper">
            <iframe id="sutraFrame" src="" title="Sutta content"></iframe>
          </div>
        </div>
      </div>
    </main>

    <!-- FOOTER -->
    <footer class="py-2">
      <div class="container text-center">
        Namo Tassa Bhagavato Arahato Sammāsambuddhassa
      </div>
    </footer>
  </div>

  <!-- HELP OVERLAY -->
  <div id="helpOverlay" class="overlay" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h2 class="mb-0"
            data-text-vi="Hướng dẫn Nikāya Archive"
            data-text-en="Nikāya Archive Guide">
          Hướng dẫn Nikāya Archive
        </h2>
        <button type="button" class="dialog-close" id="helpClose">×</button>
      </div>

      <div id="helpContentVi">
        <p>Một vài gợi ý sử dụng:</p>
        <ul>
          <li>Dùng nút <strong>☰ Mục lục</strong> để ẩn / hiện danh mục kinh. Trên điện thoại, thanh này trượt ra/vào như một menu.</li>
          <li>Chọn một bài kinh bên trái, nội dung sẽ được tải vào khung bên phải. Lần đọc cuối cùng được ghi nhớ và tự mở lại khi bạn quay lại trang.</li>
          <li>Nút <strong>⟨ Kinh trước</strong> và <strong>Kinh sau ⟩</strong> chuyển qua lại giữa các bài kinh theo đúng thứ tự đang hiển thị trong danh mục kinh.</li>
          <li>Nút <strong>VN / EN</strong> đổi ngôn ngữ giao diện.</li>
          <li>Các nút <strong>PLI / EN / VI, bố cục Row/Col, màu cột</strong> nằm bên trong từng trang kinh và chỉ ảnh hưởng bài kinh đó.</li>
          <li>Trạng thái mở / thu của từng nhóm danh mục, vị trí cuộn trong thanh bên và trạng thái ẩn/hiện danh mục được lưu lại cho lần truy cập sau.</li>
        </ul>
        <p class="text-muted mb-0">Bấm ra ngoài khung hoặc nút ✕ để đóng phần hướng dẫn.</p>
      </div>

      <div id="helpContentEn" class="d-none">
        <p>Some quick tips:</p>
        <ul>
          <li>Use the <strong>☰ Index</strong> button to show or hide the sutta list. On phones, this panel slides in and out like a menu.</li>
          <li>Select a sutta on the left and its content will load in the panel on the right. The last sutta you read is remembered and automatically reopened when you come back.</li>
          <li>The <strong>⟨ Previous Sutta</strong> and <strong>Next Sutta ⟩</strong> buttons move between suttas in the same order as in the list.</li>
          <li>The <strong>VN / EN</strong> buttons switch the interface language.</li>
          <li>Per-sutta controls (PLI / EN / VI toggles, row/column layout, column colors) live inside each sutta page and affect only that page.</li>
          <li>The open/closed state of each section, the sidebar scroll position, and whether the index is hidden or shown are all remembered for your next visit.</li>
        </ul>
        <p class="text-muted mb-0">Click outside this dialog or press ✕ to close the help overlay.</p>
      </div>
    </div>
  </div>

  <!-- overlay cho mobile sidebar -->
  <div id="mobileMask" class="mobile-mask"></div>

  <script>
    (function(){
      const sidebarWrapper   = document.getElementById('sidebarWrapper');
      const contentWrapper   = document.getElementById('contentWrapper');
      const btnSidebarToggle = document.getElementById('btnSidebarToggle');
      const sidebar          = document.getElementById('sidebar');
      const sutraFrame       = document.getElementById('sutraFrame');
      const btnPrev          = document.getElementById('btnPrev');
      const btnNext          = document.getElementById('btnNext');
      const btnHelp          = document.getElementById('btnHelp');
      const btnLangVi        = document.getElementById('btnLangVi');
      const btnLangEn        = document.getElementById('btnLangEn');
      const helpOverlay      = document.getElementById('helpOverlay');
      const helpClose        = document.getElementById('helpClose');
      const helpContentVi    = document.getElementById('helpContentVi');
      const helpContentEn    = document.getElementById('helpContentEn');
      const mobileMask       = document.getElementById('mobileMask');

      const LINK_KEY          = 'nikaya_last_sutta';
      const SIDEBAR_STATE_KEY = 'nikaya_sidebar_state';
      const LANG_KEY          = 'nikaya_ui_lang';
      const LANG_SIMPLE_KEY   = 'nikaya_lang'; // cho iframe

      const links     = document.querySelectorAll('.sutta-link');
      const langElems = document.querySelectorAll('[data-text-vi]');

      let currentHref = '';
      let currentLang = 'vi';

      function isMobile(){
        return window.innerWidth <= 768;
      }

      /* ========== UI LANGUAGE ========== */
      function setLang(lang){
        currentLang = (lang === 'en') ? 'en' : 'vi';
        try{
          localStorage.setItem(LANG_KEY, currentLang);
          localStorage.setItem(LANG_SIMPLE_KEY, currentLang);
        }catch(e){}

        langElems.forEach(el=>{
          const vi = el.getAttribute('data-text-vi') || '';
          const en = el.getAttribute('data-text-en') || '';
          el.textContent = currentLang === 'vi' ? vi : (en || vi);
        });

        links.forEach(a=>{
          const pali = a.dataset.titlePali || a.textContent.trim();
          const vi   = a.dataset.titleVi   || pali;
          a.textContent = currentLang === 'vi' ? vi : pali;
        });

        btnLangVi.classList.toggle('btn-lang-active', currentLang === 'vi');
        btnLangEn.classList.toggle('btn-lang-active', currentLang === 'en');

        const isVi = currentLang === 'vi';
        helpContentVi.classList.toggle('d-none', !isVi);
        helpContentEn.classList.toggle('d-none', isVi);
      }

      (function initLang(){
        let saved = 'vi';
        try{
          const v = localStorage.getItem(LANG_KEY);
          if(v === 'en' || v === 'vi') saved = v;
        }catch(e){}
        setLang(saved);
      })();

      btnLangVi.addEventListener('click',()=> setLang('vi'));
      btnLangEn.addEventListener('click',()=> setLang('en'));

      /* ========== SIDEBAR WIDTH / COLLAPSE ========== */
      function updateContentWidth(){
        if(!contentWrapper) return;
        const collapsed = sidebarWrapper && sidebarWrapper.classList.contains('d-none');
        if(collapsed){
          contentWrapper.classList.remove('col-md-8','col-lg-9');
          contentWrapper.classList.add('col-md-12','col-lg-12');
        }else{
          contentWrapper.classList.remove('col-md-12','col-lg-12');
          contentWrapper.classList.add('col-md-8','col-lg-9');
        }
      }

      if(btnSidebarToggle && sidebarWrapper){
        btnSidebarToggle.addEventListener('click',()=>{
          if(isMobile()){
            // mobile: toggle drawer
            document.body.classList.toggle('mobile-sidebar-open');
          }else{
            // desktop / tablet: ẩn/hiện cột như cũ
            sidebarWrapper.classList.toggle('d-none');
            updateContentWidth();
            saveSidebarState();
          }
        });
      }

      /* ========== SAVE / RESTORE SIDEBAR STATE ========== */
      function saveSidebarState(){
        if(!sidebar) return;
        const lists = document.querySelectorAll('.sidebar-list');
        const open = [];
        lists.forEach(list=>{
          if(!list.classList.contains('collapsed') && list.id){
            open.push(list.id);
          }
        });
        const state = {
          open,
          scrollTop: sidebar.scrollTop || 0,
          collapsed: sidebarWrapper ? sidebarWrapper.classList.contains('d-none') : false
        };
        try{
          localStorage.setItem(SIDEBAR_STATE_KEY, JSON.stringify(state));
        }catch(e){}
      }

      function restoreSidebarState(){
        if(!sidebar) return;
        let state = {};
        try{
          state = JSON.parse(localStorage.getItem(SIDEBAR_STATE_KEY) || '{}');
        }catch(e){ state = {}; }

        const lists = document.querySelectorAll('.sidebar-list');
        if(Array.isArray(state.open)){
          lists.forEach(list=>{
            if(state.open.includes(list.id)){
              list.classList.remove('collapsed');
            }else{
              list.classList.add('collapsed');
            }
          });
        }

        if(typeof state.scrollTop === 'number'){
          sidebar.scrollTop = state.scrollTop;
        }

        // khôi phục trạng thái thu/mở sidebar (chỉ desktop / tablet)
        if(sidebarWrapper && typeof state.collapsed === 'boolean' && !isMobile()){
          sidebarWrapper.classList.toggle('d-none', state.collapsed);
        }

        const toggles = document.querySelectorAll('.sidebar-toggle');
        toggles.forEach(btn=>{
          const targetId = btn.getAttribute('data-target');
          const list = document.getElementById(targetId);
          const chev = btn.querySelector('.chevron');
          if(list && chev){
            chev.textContent = list.classList.contains('collapsed') ? '▸' : '▾';
          }
        });

        updateContentWidth();
      }

      restoreSidebarState();

      const toggles = document.querySelectorAll('.sidebar-toggle');
      toggles.forEach(btn=>{
        const targetId = btn.getAttribute('data-target');
        const list = document.getElementById(targetId);
        const chev = btn.querySelector('.chevron');
        btn.addEventListener('click',()=>{
          if(!list || !chev) return;
          const collapsed = list.classList.toggle('collapsed');
          chev.textContent = collapsed ? '▸' : '▾';
          saveSidebarState();
        });
      });

      /* ========== LOAD SUTTA ========== */
      function setActiveLink(href){
        links.forEach(a=>{
          a.classList.toggle('active', a.getAttribute('href') === href);
        });
      }

      function loadSutta(href){
        if(!href) return;
        sutraFrame.src = href;
        currentHref = href;
        setActiveLink(href);
        saveSidebarState();
        try{
          localStorage.setItem(LINK_KEY, href);
        }catch(e){}
        // đóng drawer sau khi chọn trên mobile
        if(isMobile()){
          document.body.classList.remove('mobile-sidebar-open');
        }
      }

      links.forEach(a=>{
        a.addEventListener('click',(e)=>{
          e.preventDefault();
          const href = a.getAttribute('href');
          if(!href) return;
          loadSutta(href);
        });
      });

      let last = '';
      try{
        last = localStorage.getItem(LINK_KEY) || '';
      }catch(e){}
      if(!last){
        last = 'bg.html';   // trang mặc định
      }
      loadSutta(last);

      /* ========== PREV / NEXT ========== */
      function goToOffset(offset){
        const hrefs = Array.from(links).map(a=>a.getAttribute('href'));
        if(!hrefs.length) return;
        let idx = hrefs.indexOf(currentHref);
        if(idx === -1) idx = 0;
        let targetIdx = idx + offset;
        if(targetIdx < 0) targetIdx = 0;
        if(targetIdx >= hrefs.length) targetIdx = hrefs.length - 1;
        const nextHref = hrefs[targetIdx];
        if(nextHref && nextHref !== currentHref){
          loadSutta(nextHref);
        }
      }

      btnPrev.addEventListener('click',()=> goToOffset(-1));
      btnNext.addEventListener('click',()=> goToOffset(1));

      /* ========== HELP DIALOG ========== */
      function openHelp(){
        helpOverlay.classList.add('show');
        helpOverlay.setAttribute('aria-hidden','false');
      }
      function closeHelp(){
        helpOverlay.classList.remove('show');
        helpOverlay.setAttribute('aria-hidden','true');
      }

      btnHelp.addEventListener('click',(e)=>{
        e.stopPropagation();
        openHelp();
      });
      helpClose.addEventListener('click',(e)=>{
        e.stopPropagation();
        closeHelp();
      });
      helpOverlay.addEventListener('click',(e)=>{
        if(e.target === helpOverlay) closeHelp();
      });

      /* ========== Mobile mask click ========== */
      if(mobileMask){
        mobileMask.addEventListener('click',()=>{
          document.body.classList.remove('mobile-sidebar-open');
        });
      }

      /* ========== Swipe mở/đóng sidebar trên mobile ========== */
      let touchStartX = 0;
      let touchEndX   = 0;

      document.addEventListener('touchstart', (e)=>{
        if(!isMobile()) return;
        if(!e.touches || !e.touches.length) return;
        touchStartX = e.touches[0].clientX;
      }, {passive:true});

      document.addEventListener('touchend', (e)=>{
        if(!isMobile()) return;
        if(!e.changedTouches || !e.changedTouches.length) return;
        touchEndX = e.changedTouches[0].clientX;
        const deltaX = touchEndX - touchStartX;

        // Vuốt từ trái sang phải để mở (bắt đầu sát mép trái)
        if(deltaX > 60 && touchStartX < 40 && !document.body.classList.contains('mobile-sidebar-open')){
          document.body.classList.add('mobile-sidebar-open');
          return;
        }

        // Vuốt từ phải sang trái để đóng khi đang mở
        if(deltaX < -60 && document.body.classList.contains('mobile-sidebar-open')){
          document.body.classList.remove('mobile-sidebar-open');
        }
      }, {passive:true});

      window.addEventListener('beforeunload', saveSidebarState);
    })();
  </script>
</body>
</html>
