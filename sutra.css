:root{--bg:#f3f4f6;--card:#ffffff;--muted:#64748b;--accent:#2563eb;--accent-soft:#dbeafe;--border:#e2e8f0;--border-soft:rgba(148,163,184,0.25);--border-strong:rgba(148,163,184,0.9);--shadow-card:0 12px 30px rgba(15,23,42,0.12);--shadow-panel:0 12px 30px rgba(15,23,42,0.35);--shadow-btn:0 2px 6px rgba(15,23,42,0.15);--pali-bg:#ffffff;--pali-fg:#111827;--eng-bg:#ffffff;--eng-fg:#111827;--vie-bg:#ffffff;--vie-fg:#111827;--sutra-font-scale:1}*{box-sizing:border-box}#title,body,html{margin:0;overflow:hidden}body,html{height:100%;padding:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:#0f172a}.app,.card{display:flex}.app{height:100%;justify-content:center;align-items:stretch;padding:6px}.card{background:var(--card);border-radius:16px;border:1px solid var(--border-soft);box-shadow:var(--shadow-card);width:100%;max-width:960px;flex-direction:column;padding:10px 14px 8px;position:relative}.header,.top-note{flex:0 0 auto;padding-bottom:6px}.header{border-bottom:1px solid rgba(148,163,184,.25);margin-bottom:6px}#title{font-size:calc(1.05rem*var(--sutra-font-scale));font-weight:800;letter-spacing:.08em;text-transform:uppercase;color:var(--accent);white-space:nowrap;text-overflow:ellipsis}#subtitle{margin-top:3px;font-size:calc(12.5px*var(--sutra-font-scale));color:var(--muted)}.top-note{text-align:center;font-size:13px;color:#64748b;position:relative;margin-bottom:8px}.top-note::after{content:"";position:absolute;left:20%;right:20%;bottom:0;height:1px;background:linear-gradient(to right,transparent,rgba(59,130,246,.4),transparent)}#sutraGrid{flex:1 1 auto;min-height:0;overflow:auto;padding:8px 4px 4px;display:flex;flex-direction:column;gap:8px;-webkit-overflow-scrolling:touch}.sutra-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;padding:8px 10px;border-radius:12px;border:1px solid var(--border-soft);background:#fff;transition:box-shadow .15s ease,border-color .15s ease,transform .1s ease}.sutra-row.reading{border-color:rgba(37,99,235,.95);box-shadow:0 0 0 2px rgba(191,219,254,.9);transform:translateY(-1px)}.sutra-col{font-size:calc(13.5px*var(--sutra-font-scale));line-height:1.7;padding:4px 6px;border-radius:8px}.pali-col{background-color:var(--pali-bg);color:var(--pali-fg)}.eng-col{background-color:var(--eng-bg);color:var(--eng-fg)}.vie-col{background-color:var(--vie-bg);color:var(--vie-fg)}.pali{font-family:"Noto Serif",serif;font-size:calc(14.5px*var(--sutra-font-scale))}.eng{font-family:Georgia,serif}.vie{font-family:system-ui}.hide-eng .eng-col,.hide-pali .pali-col,.hide-vie .vie-col{display:none}.stack .sutra-row{grid-template-columns:1fr}.bottom-controls{flex:0 0 auto;display:flex;align-items:center;gap:8px;padding:4px 0;margin-top:2px;border-top:1px dashed rgba(148,163,184,.35);border-bottom:1px dashed rgba(148,163,184,.15)}.bottom-controls-spacer{flex:1}.btn-circle{width:32px;height:32px;border-radius:10px;border:1px solid var(--border-strong);background:#f8fafc;color:#111827;display:flex;align-items:center;justify-content:center;font-size:16px;cursor:pointer;padding:0;box-shadow:var(--shadow-btn);transition:transform .08s ease,box-shadow .08s ease}.btn-circle:hover{background:#f8fafc!important;transform:none!important;box-shadow:var(--shadow-btn)!important}.btn-circle:active{transform:scale(.96);box-shadow:0 1px 3px rgba(0,0,0,.2);border-color:var(--accent-soft)}.btn-circle:focus,.btn-circle:focus-visible{outline:0!important;box-shadow:0 0 0 1px var(--accent-soft)}#btnBackTop{opacity:.4;background:#e5e7eb;box-shadow:none;cursor:default}#btnBackTop.enabled{opacity:1;background:#f8fafc;cursor:pointer;box-shadow:var(--shadow-btn)}.panel{position:absolute;left:12px;bottom:60px;min-width:230px;max-width:280px;max-height:60vh;overflow:auto;background:#fff;border-radius:12px;border:1px solid rgba(148,163,184,.7);box-shadow:var(--shadow-panel);padding:8px 10px;font-size:12px;opacity:0;transform:translateY(6px);pointer-events:none;z-index:20;transition:opacity .2s ease,transform .2s ease;-webkit-overflow-scrolling:touch}#sutraMenuPanel.open,.panel.open{opacity:1;transform:translateY(0);pointer-events:auto}.panel button:not(.menu-toggle):not(.search-result-item){border-radius:999px;border:1px solid var(--border-strong);background:#f1f5f9;padding:2px 10px;font-size:11.5px;cursor:pointer;display:inline-flex;align-items:center;gap:4px}#settingsPanel{right:12px;left:auto}#sutraMenuPanel{position:absolute;top:90px;bottom:58px;left:12px;right:auto;min-width:350px;max-width:320px;max-height:none;display:flex;flex-direction:column;overflow:hidden;background:#fff;border-radius:12px;border:1px solid rgba(148,163,184,.7);box-shadow:var(--shadow-panel);padding:8px 10px;font-size:12px;opacity:0;transform:translateY(6px);pointer-events:none;z-index:20;transition:opacity .2s ease,transform .2s ease}@media (max-width:500px){#sutraMenuPanel{left:8px;right:8px;max-width:none;bottom:58px;max-height:none}}.panel-title{font-size:14px;font-weight:600;margin-bottom:4px;color:#0f172a}.panel-row{display:flex;align-items:center;gap:6px;margin-bottom:6px;flex-wrap:wrap}.panel-label{font-size:11.5px;color:#4b5563;min-width:60px}.tts-group button{min-width:40px;justify-content:center}.panel-row.tts-group{display:grid;grid-template-columns:minmax(0,1fr) auto auto auto;column-gap:6px;align-items:center}.panel-row.tts-group .panel-label{min-width:0;white-space:normal}.panel-row.tts-group button{min-width:32px;justify-content:center}.color-settings{margin-top:6px;padding-top:6px;border-top:1px dashed rgba(148,163,184,.3)}.color-settings h3{margin:0 0 4px;font-size:12px;font-weight:600;color:#0f172a}.color-row,.color-row label{display:flex;align-items:center}.color-row{gap:6px;margin-bottom:4px;flex-wrap:wrap}.color-lang-label{font-size:11.5px;font-weight:600;min-width:40px}.color-row label{font-size:11px;color:#4b5563;gap:4px}.color-row input[type=color]{width:18px;height:18px;padding:0;border-radius:4px;border:1px solid var(--border-soft)}.menu-block>.menu-toggle,.menu-subblock .chapter-toggle,.menu-sutta-link,.menu-toggle.nested,.sutra-label-main,.sutra-label-sub{font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}#sutraMenuPanel .search-box,#sutraMenuPanel .search-results{flex:0 0 auto}.search-box{margin-top:4px;margin-bottom:3px}#sutraSearch{width:100%;padding:4px 8px;font-size:12px;border-radius:8px;border:1px solid var(--border-strong)}#sutraSearch:focus{border-color:var(--accent);box-shadow:0 0 0 1px var(--accent-soft)}#sutraMenuPanel .sutra-list{list-style:none;margin:4px 0 0;padding:0;flex:1 1 auto;min-height:0;overflow-y:auto;position:relative;border-top:1px solid #e5e7eb}.menu-block{padding:4px 0;border-bottom:1px solid #e5e7eb}.menu-block:last-child{border-bottom:none}#sutraMenuPanel .sutra-list>.menu-block,#sutraMenuPanel .sutra-list>li{margin-left:0;padding-left:0}#sutraMenuPanel .sutra-list::-webkit-scrollbar{width:6px}#sutraMenuPanel .sutra-list::-webkit-scrollbar-track{background:0 0}#sutraMenuPanel .sutra-list::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:999px}.menu-block>.menu-toggle:not(.nested){position:relative;width:100%;background:0 0;border:0;border-radius:0;text-align:left;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:clip;padding:7px 60px 7px 10px;font-weight:700;line-height:1.45;font-size:11.5px;text-transform:uppercase;letter-spacing:.02em;color:#374151}.chevron{font-size:10px;line-height:1;opacity:.7;display:inline-block}.menu-block>.menu-toggle:not(.nested) .chevron{position:absolute;right:14px;top:50%;transform:translateY(-50%)}.menu-toggle.nested{width:100%;background:0 0;border:0;border-radius:0;text-align:left;cursor:pointer;display:flex;align-items:center;justify-content:space-between;position:relative;padding:7px 44px 7px 18px;font-weight:600;font-size:13px;color:#374151;border-bottom:1px dashed #e5e7eb}.menu-toggle.nested:last-child{border-bottom:none}.menu-subblock .chapter-toggle::before,.menu-toggle.nested::before{content:"▸";position:absolute;left:4px;top:50%;transform:translateY(-50%);font-size:9px;opacity:.75}.menu-toggle.nested .chevron{position:absolute;right:14px;top:50%;transform:translateY(-50%)}.menu-toggle.nested.open::before{content:"▾"}.menu-subblock{margin:3px 0;padding-left:22px}.menu-subblock .chapter-toggle{font-weight:500;font-size:12.5px;color:#4b5563;padding:3px 0 3px 14px;position:relative}.menu-subblock .chapter-toggle::before{content:"–";left:0;font-size:12px;opacity:.7}.menu-list{margin-left:0;padding-left:0;margin-bottom:3px}.menu-list.collapsed{display:none}.menu-sutta-link{position:relative;display:flex;flex-direction:column;gap:2px;padding:5px 6px 6px 34px;margin-bottom:2px;border-radius:6px;cursor:pointer;text-decoration:none;background:0 0;color:#0f172a;border-bottom:1px dashed rgba(148,163,184,.25)}.menu-sutta-link:last-child{border-bottom:none}.menu-sutta-link::before{content:"•";position:absolute;left:18px;top:9px;font-size:10px;opacity:.6}.menu-sutta-link:hover{background:#f3f4f6}.menu-sutta-link.active{background:#2563eb}.sutra-label{display:flex;flex-direction:column;line-height:1.35}.sutra-label-main{font-size:13px;font-weight:600;color:#111827}.sutra-label-sub{font-size:12px;font-weight:400;color:#6b7280}.menu-sutta-link.active .sutra-label-main{color:#fff}.menu-sutta-link.active .sutra-label-sub{color:rgba(239,246,255,.9)}.search-results{margin-top:6px;margin-bottom:8px;padding:0;max-height:220px;overflow:auto;-webkit-overflow-scrolling:touch}.search-results:empty{display:none}.search-result-item{width:100%;text-align:left;border:0;background:0 0;border-radius:0;padding:6px 2px;margin:0;display:flex;flex-direction:column;gap:2px;cursor:pointer;color:#0f172a;font-size:12.5px;line-height:1.4}.search-result-item:hover{background:#f8fafc}.search-result-item:focus,.search-result-item:focus-visible{outline:0;box-shadow:none}.search-result-item .search-main{font-weight:600;font-size:13px}.search-result-item .search-sub{font-size:12px;opacity:.75}.search-result-item mark{background:#fef3c7;padding:0 2px;border-radius:3px;font-weight:600}.search-result-empty{padding:4px 0;font-size:12px;color:#9ca3af}#guideOverlay{position:fixed;inset:0;background:rgba(15,23,42,.55);display:none;align-items:center;justify-content:center;z-index:100}#guideOverlay.show{display:flex}.guide-dialog{background:#fff;border-radius:16px;padding:12px 14px;max-width:360px;width:92%;max-height:78vh;overflow-y:auto;font-size:13px;box-shadow:0 20px 50px rgba(15,23,42,.5)}.guide-dialog h2{font-size:16px;font-weight:700;text-align:center;color:#2563eb;letter-spacing:.03em}.guide-dialog button{margin-top:10px;float:right;border-radius:999px;border:1px solid #2563eb;background:#eff6ff;padding:3px 14px;font-size:12px;color:#2563eb;cursor:pointer}.guide-dialog em{display:block;font-size:12px;color:#6b7280;font-style:italic;margin-top:2px}.guide-dialog ul{padding-left:18px;line-height:1.55}.guide-dialog h2,.guide-dialog li{margin-bottom:8px}.guide-dialog li::marker{color:#2563eb;font-size:14px}.welcome-screen{width:100%;display:flex;justify-content:center;padding-top:24px}.welcome-box{max-width:520px;width:100%;padding:14px 16px;font-size:13.5px;line-height:1.7;color:#6b7280;border:1px dashed rgba(148,163,184,.35);border-radius:12px;background:#fff;text-align:left}.panel button.active{background:var(--accent)!important;color:#fff!important;border-color:var(--accent)!important}.panel button.active:hover{background:#1d4ed8}.panel button.active,.panel button[aria-pressed=true]{box-shadow:0 0 0 1px var(--accent-soft)}.btn-circle.active,.panel button[aria-pressed=true]{background:var(--accent);color:#fff;border-color:var(--accent)}.btn-flag svg{width:18px;height:18px;display:block}.layout-wide .app{padding:0}.layout-wide .card{max-width:none;width:100%;height:100%;border-radius:0}@media (max-width:500px){.sutra-row{grid-template-columns:1fr}}#btnSutraMenu{font-size:17px;line-height:1;padding:0}#btnSutraMenu,#btnSutraMenu span,#btnSutraMenu svg,#btnSutraMenu::before{display:flex;align-items:center;justify-content:center}*,a,button,input,label{-webkit-tap-highlight-color:transparent!important}#sutraSearch,.btn-circle,.menu-sutta-link,.menu-toggle,.panel button,button{outline:0!important;-webkit-focus-ring-color:transparent!important;box-shadow:none!important}#sutraMenuPanel .menu-block>.menu-toggle:not(.nested){position:-webkit-sticky;position:sticky;top:0;z-index:50;background:linear-gradient(to right,#fff,#fff);box-shadow:0 1px 0 rgba(0,0,0,.04);display:block}#sutraMenuPanel .menu-block>.menu-toggle:not(.nested).sticky-divider{box-shadow:0 1px 0 rgba(148,163,184,.08)}
